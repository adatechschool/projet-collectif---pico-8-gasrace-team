pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function _init()
	create_p1()
	gas = 350
end

function _update()
 mouv_p1()
 empty()
 
 retry()
end

function _draw()
	cls(4)
	map(0, 0, 0, 0)
	
	draw_p1()
	
	draw_empty()
	pickup_station()
	game_over()
end 
-->8
-- mouvement joueur

function create_p1()
	p1 = {x=00, y=103, speed=0.7}
end

function draw_p1()
	spr (1, p1.x, p1.y)
end

function mouv_p1()
	if (btn(⬆️)) p1.y-=p1.speed
	if (btn(⬇️)) p1.y+=p1.speed
	if (btn(➡️)) p1.x+=p1.speed
	if (btn(⬅️)) p1.x-=p1.speed
	
end
-->8
--jauge essence


function empty()
	if (btn(⬆️)) gas-=1
	if (btn(⬇️)) gas-=1
	if (btn(➡️)) gas-=1
	if (btn(⬅️)) gas-=1
end

function draw_empty()
	spr (16, 1, 1, 2, 2)
		if (gas<300) then 
			spr (18, 1, 1, 2, 2)		
				if (gas<250) then 
					spr (20, 1, 1, 2, 2)
						if (gas<200) then 
							spr (22, 1, 1, 2, 2)
						 	if (gas<150) then 
							  spr (24, 1, 1, 2, 2)
							 	 if (gas<100) then 
							  		spr (26, 1, 1, 2, 2)
							  			if (gas<50) then 
							  				spr (28, 1, 1, 2, 2)
										  	if (gas<0) then           
             	spr (30, 1, 1, 2, 2)
													end           
           	end        
	        	end     
		     	end
		   	end
		 	end
		end
end

-->8
--map--

-->8
--game over

function game_over()
	if gas <= 0 then
		cls(4)
		print("t'as plus de gas !", 50, 50, 14)
	 print("press ❎ to retry", 55, 55, 14) 
		end	
end

function retry()
	if (btn(❎)) _init()
end
	
	
	
-->8
--poste d'essence

function change_station(flag,x,y)
	local station = mget(x,y)
	return fget(3,8)
end

function pickup_station()
	print(p1.x)
	if p1.x >= 48 then
	print("p1.x>48") 
		change_station(48,40)
	end
end
	 
__gfx__
00000000009339000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000053333500088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070005cccc500dd7780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000c33c00d087780000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000c33c00d088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700053cc350d088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000053333500dd8880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008338000555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0
c8c9c9cbcbcbcbc0c8c9c9cbcbcbc7c0c8c9c9cbcbc7c7c0c8c9c9cbc7c7c7c0c8c9c9c7c7c7c7c0c8c9c7c7c7c7c7c0c8c7c7c7c7c7c7c0c7c7c7c7c7c7c7c0
c8c9c9cbcbcbcbc0c8c9c9cbcbcbc7c0c8c9c9cbcbc7c7c0c8c9c9cbc7c7c7c0c8c9c9c7c7c7c7c0c8c9c7c7c7c7c7c0c8c7c7c7c7c7c7c0c7c7c7c7c7c7c7c0
c8c9c9cbcbcbcbc0c8c9c9cbcbcbc7c0c8c9c9cbcbc7c7c0c8c9c9cbc7c7c7c0c8c9c9c7c7c7c7c0c8c9c7c7c7c7c7c0c8c7c7c7c7c7c7c0c7c7c7c7c7c7c7c0
ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0ccccccccccccccc0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc8888ccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc8888ccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc8888ccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccc8888ccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccccc9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0eeeeee0777667775555555556666667766666655666666776666665555555557776677777766777555555557666666556666667566666666666666556666667
eeeeeeee666666666666666656666667766666656666666766666665566666667666666666666667666666657666666656666666666666666666666666666667
eeeeeeee666666666666666656666667766666656666666766666665566666667666666666666667666666657666666656666666666666666666666666666667
eeeeeeee666666666666666656666666666666656666666666666665566666666666666666666666666666656666666656666666666666666666666666666666
eeeeeeee666666666666666656666666666666656666666666666665566666666666666666666666666666656666666656666666666666666666666666666666
eeeeeeee666666666666666656666667766666656666666766666665566666667666666666666667666666657666666656666666666666666666666666666667
eeeeeeee666666666666666656666667766666656666666766666665566666667666666666666667666666657666666656666666666666666666666666666667
0eeeeee0555555557776677756666667766666657776677755555555566666677666666556666667766666657776677755555555777667777776677766666667
66666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
56666667000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000080000000100000000000000000000000000000000000000000000000808000000000000000000000000000008080000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000474242424242424a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000043484141414149440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000043444040404043440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000004344404742424d4e42424a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000043444043484141414149440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000043444043444040404043440043440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0047424245444043444040404043440043440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
40434841414640434440404040434b4245440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
424f44404040404344404040404c414141460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
41504b4242424245444040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
404c414141414141464040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
4040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
